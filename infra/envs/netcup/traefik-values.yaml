# infra/envs/netcup/traefik-values.yaml
# Environment-specific values for production (netcup)

# Inherit from global values
network:
  domain: "{{ .Values.network.domain }}"

global:
  domain: "{{ .Values.network.domain }}"

ingressRoute:
  dashboard:
    matchRule: >
      Host(`traefik.{{ .Values.network.domain }}`)
      && (PathPrefix(`/dashboard`) || PathPrefix(`/api`))
    middlewares:
      - name: basic-auth
        namespace: admin

extraObjects:
  # Wildcard certificate for production domain
  - apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      name: wildcard-netcup
    spec:
      secretName: wildcard-netcup-tls
      dnsNames:
        - '*.{{ .Values.network.domain }}'
      issuerRef:
        name: letsencrypt-prod
        kind: ClusterIssuer

tlsStore:
  default:
    defaultCertificate:
      secretName: "wildcard-netcup-tls"
