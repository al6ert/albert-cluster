# infra/envs/minikube/traefik-values.yaml
# Environment-specific overrides for Minikube (local development)

# Inherit from global values
network:
  domain: "127.0.0.1.nip.io"

global:
  domain: "127.0.0.1.nip.io"

ingressRoute:
  dashboard:
    matchRule: >
      Host(`traefik.127.0.0.1.nip.io`)
      && (PathPrefix(`/dashboard`) || PathPrefix(`/api`))

extraObjects:
  # Wildcard certificate for local environment
  - apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      name: wildcard-minikube
      namespace: traefik
    spec:
      secretName: wildcard-minikube-tls
      dnsNames:
        - '*.127.0.0.1.nip.io'
      issuerRef:
        name: local-ca-issuer
        kind: ClusterIssuer

tlsStore:
  default:
    defaultCertificate:
      secretName: "wildcard-minikube-tls"
