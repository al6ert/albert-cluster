# infra/envs/minikube/traefik-values.yaml
# Environment-specific overrides for Minikube (local development)

# Inherit from global values
network:
  domain: "{{ .Values.network.domain }}"

global:
  domain: "{{ .Values.network.domain }}"

ingressRoute:
  dashboard:
    matchRule: >
      Host(`traefik.{{ .Values.network.domain }}`)
      && (PathPrefix(`/dashboard`) || PathPrefix(`/api`))

extraObjects:
  # Wildcard certificate for local environment
  - apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      name: wildcard-minikube
    spec:
      secretName: wildcard-minikube-tls
      dnsNames:
        - '*.{{ .Values.network.domain }}'
      issuerRef:
        name: local-ca-issuer
        kind: ClusterIssuer      

tlsStore:
  default:
    defaultCertificate:
      secretName: "wildcard-minikube-tls"        